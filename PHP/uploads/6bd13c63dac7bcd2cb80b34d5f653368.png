<?php

$baseLocationX = 18.5267;
$baseLocationY = 14.8407;

function getRandomLocation($l, $w) {
	$angle = rand(0, 1) * pi() * 2;

	/* Square root of a 
	 * random length with cx
	 * multiplied by angle
	 * and location accuracy
	 * (in metres) constant.
	 */
	$t = sqrt(rand(0, 1) * ($l * $l/ 4))
		* $angle
		* 111111
		*pow(10, -4);
	$x = cos($angle)
		* $t
		+ $baseLocationX;
	$y = sin($angle)
		* $t
		* ($w / $l)
		+ $baseLocationY;

	return array("lat" => $x, "lon" => $y);
}

$l = 0;
$w = 0;

if(isset($_POST['length'])) {
	$l = $_POST['length'];
	if(!is_numeric($l))
		die(json_encode(array("msg" => "Length  is not a number")));
} else
	die(json_encode(array("msg" => "Length not specified")));

if(isset($_POST['width'])) {
	$w = $_POST['width'];
        if(!is_numeric($w))
                die(json_encode(array("msg" => "Width is not a number")));
} else
	die(json_encode(array("msg" => "Width not specified")));

if($l > $w) {
	$temp = $l;
	$l = $w;
	$w = $temp;
}

$locations = array();

for($i = 0; $i < 100; $i++)
	array_push($locations,
	       	getRandomLocation($l, $w));

echo(json_encode($locations));

exit();
?>
